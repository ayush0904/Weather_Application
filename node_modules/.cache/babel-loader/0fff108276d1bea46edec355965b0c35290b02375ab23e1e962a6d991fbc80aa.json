{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ayushtripathi/Desktop/Weather_Application/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ayushtripathi/Desktop/Weather_Application/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/ayushtripathi/Desktop/Weather_Application/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{DateTime,IANAZone,FixedOffsetZone}from\"luxon\";var API_KEY=process.env.REACT_APP_API_URL;// API KEY Store in .env file\nvar BASE_URL=\"https://api.openweathermap.org/data/2.5\";var getWeatherData=function getWeatherData(infoType,searchParams){var url=new URL(BASE_URL+\"/\"+infoType);url.search=new URLSearchParams(_objectSpread(_objectSpread({},searchParams),{},{appid:API_KEY}));return fetch(url).then(function(res){return res.json();});};var formatCurrentWeather=function formatCurrentWeather(data){var _data$coord=data.coord,lat=_data$coord.lat,lon=_data$coord.lon,_data$main=data.main,temp=_data$main.temp,feels_like=_data$main.feels_like,temp_min=_data$main.temp_min,temp_max=_data$main.temp_max,humidity=_data$main.humidity,name=data.name,dt=data.dt,_data$sys=data.sys,country=_data$sys.country,sunrise=_data$sys.sunrise,sunset=_data$sys.sunset,weather=data.weather,speed=data.wind.speed,timezone=data.timezone;var _weather$=weather[0],details=_weather$.main,icon=_weather$.icon;return{lat:lat,lon:lon,temp:temp,feels_like:feels_like,temp_min:temp_min,temp_max:temp_max,humidity:humidity,name:name,dt:dt,country:country,sunrise:sunrise,sunset:sunset,details:details,icon:icon,speed:speed,timezone:timezone};};var formatForecastWeather=function formatForecastWeather(data){var list=data.list;var timezone=data.city.timezone;var uniqueDates=[];var daily=list.filter(function(obj){var currentDate=new Date(obj.dt_txt.replace(/-/g,\"/\"));// Replace '-' with '/' for Safari compatibility\nvar currentDateString=currentDate.toDateString();if(!uniqueDates.includes(currentDateString)){uniqueDates.push(currentDateString);return true;}return false;}).map(function(d){var currentDate=new Date(d.dt_txt.replace(/-/g,\"/\"));var currentDay=currentDate.toLocaleDateString(undefined,{weekday:\"short\"});return{title:currentDay,temp:d.main.temp,icon:d.weather[0].icon};});var hourly=list.slice(1,6).map(function(d){return{title:formatToLocalTime(d.dt,timezone,{hour:'numeric',minute:'numeric',hour12:true}),temp:d.main.temp,icon:d.weather[0].icon};});return{timezone:timezone,daily:daily,hourly:hourly};};var getFormattedWeatherData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(searchParams){var formattedCurrentWeather,lat,lon,formattedForecastWeather;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getWeatherData(\"weather\",searchParams).then(formatCurrentWeather);case 2:formattedCurrentWeather=_context.sent;lat=formattedCurrentWeather.lat,lon=formattedCurrentWeather.lon;_context.next=6;return getWeatherData(\"forecast\",searchParams).then(formatForecastWeather);case 6:formattedForecastWeather=_context.sent;return _context.abrupt(\"return\",_objectSpread(_objectSpread({},formattedCurrentWeather),formattedForecastWeather));case 8:case\"end\":return _context.stop();}},_callee);}));return function getFormattedWeatherData(_x){return _ref.apply(this,arguments);};}();var formatToLocalTime=function formatToLocalTime(secs,zone){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{weekday:'long',day:'numeric',month:'short',year:'numeric',hour:'numeric',minute:'numeric',hour12:true,timeZoneName:'short'};try{var timestamp=secs;// Unix timestamp in seconds\nvar offset=zone/60;// UTC offset in minutes (-4 hours)\nvar date=new Date(timestamp*1000);// convert timestamp to milliseconds\nvar utc=date.getTime()+date.getTimezoneOffset()*60000;// convert to UTC\nvar local=utc+offset*60000;// add offset to get local time in milliseconds\nvar localDate=new Date(local);// create new Date object for local time\nvar formattedDate=localDate.toLocaleString('en-US',options);return formattedDate;}catch(error){console.error(error);return\"Invalid time zone name\";}};var iconUrlFromCode=function iconUrlFromCode(code){return\"http://openweathermap.org/img/wn/\".concat(code,\"@2x.png\");};export default getFormattedWeatherData;export{formatToLocalTime,iconUrlFromCode};","map":{"version":3,"names":["DateTime","IANAZone","FixedOffsetZone","API_KEY","process","env","REACT_APP_API_URL","BASE_URL","getWeatherData","infoType","searchParams","url","URL","search","URLSearchParams","_objectSpread","appid","fetch","then","res","json","formatCurrentWeather","data","_data$coord","coord","lat","lon","_data$main","main","temp","feels_like","temp_min","temp_max","humidity","name","dt","_data$sys","sys","country","sunrise","sunset","weather","speed","wind","timezone","_weather$","details","icon","formatForecastWeather","list","city","uniqueDates","daily","filter","obj","currentDate","Date","dt_txt","replace","currentDateString","toDateString","includes","push","map","d","currentDay","toLocaleDateString","undefined","weekday","title","hourly","slice","formatToLocalTime","hour","minute","hour12","getFormattedWeatherData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formattedCurrentWeather","formattedForecastWeather","wrap","_callee$","_context","prev","next","sent","abrupt","stop","_x","apply","arguments","secs","zone","options","length","day","month","year","timeZoneName","timestamp","offset","date","utc","getTime","getTimezoneOffset","local","localDate","formattedDate","toLocaleString","error","console","iconUrlFromCode","code","concat"],"sources":["/Users/ayushtripathi/Desktop/Weather_Application/src/services/weatherService.js"],"sourcesContent":["import { DateTime,IANAZone,FixedOffsetZone } from \"luxon\";\nconst API_KEY = process.env.REACT_APP_API_URL;  // API KEY Store in .env file\nconst BASE_URL = \"https://api.openweathermap.org/data/2.5\";\n\nconst getWeatherData = (infoType, searchParams) => {\n  const url = new URL(BASE_URL + \"/\" + infoType);\n  url.search = new URLSearchParams({ ...searchParams, appid: API_KEY });\n\n  return fetch(url).then((res) => res.json());\n};\n\nconst formatCurrentWeather = (data) => {\n  const {\n    coord: { lat, lon },\n    main: { temp, feels_like, temp_min, temp_max, humidity },\n    name,\n    dt,\n    sys: { country, sunrise, sunset },\n    weather,\n    wind: { speed },\n    timezone,\n  } = data;\n\n  const { main: details, icon } = weather[0];\n\n  return {\n    lat,\n    lon,\n    temp,\n    feels_like,\n    temp_min,\n    temp_max,\n    humidity,\n    name,\n    dt,\n    country,\n    sunrise,\n    sunset,\n    details,\n    icon,\n    speed,\n    timezone,\n  };\n};\n\n\n\nconst formatForecastWeather = (data) => {\n    let { list } = data;\n    let {timezone} = data.city;\n    let uniqueDates = [];\n    let daily = list\n    .filter((obj) => {\n      const currentDate = new Date(obj.dt_txt.replace(/-/g, \"/\")); // Replace '-' with '/' for Safari compatibility\n      const currentDateString = currentDate.toDateString();\n      if (!uniqueDates.includes(currentDateString)) {\n        uniqueDates.push(currentDateString);\n        return true;\n      }\n      return false;\n    })\n    .map((d) => {\n      const currentDate = new Date(d.dt_txt.replace(/-/g, \"/\"));\n      const currentDay = currentDate.toLocaleDateString(undefined, { weekday: \"short\" });\n      return {\n        title: currentDay,\n        temp: d.main.temp,\n        icon: d.weather[0].icon,\n      };\n    });\n\n    let hourly = list.slice(1, 6).map((d) => {\n        return {\n        title: formatToLocalTime(d.dt, timezone,\n          {hour: 'numeric',\n          minute: 'numeric',\n          hour12: true}),\n        temp: d.main.temp,\n        icon: d.weather[0].icon,\n        };\n    });\n  \n\n  return { timezone, daily, hourly};\n};\n\nconst getFormattedWeatherData = async (searchParams) => {\n  const formattedCurrentWeather = await getWeatherData(\n    \"weather\",\n    searchParams\n  ).then(formatCurrentWeather);\n\n  const { lat, lon } = formattedCurrentWeather;\n\n  const formattedForecastWeather = await getWeatherData(\n    \"forecast\",\n    searchParams\n  ).then(formatForecastWeather);\n\n  return { ...formattedCurrentWeather, ...formattedForecastWeather };\n};\n\nconst formatToLocalTime = (\n  secs,\n  zone,\n  options = {\n    weekday: 'long',\n    day: 'numeric',\n    month: 'short',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    hour12: true,\n    timeZoneName: 'short'\n  },\n) => {try {\n\nconst timestamp = secs; // Unix timestamp in seconds\nconst offset = zone/60; // UTC offset in minutes (-4 hours)\n\nconst date = new Date(timestamp * 1000); // convert timestamp to milliseconds\nconst utc = date.getTime() + (date.getTimezoneOffset() * 60000); // convert to UTC\nconst local = utc + (offset * 60000); // add offset to get local time in milliseconds\n\nconst localDate = new Date(local); // create new Date object for local time\n\nconst formattedDate = localDate.toLocaleString('en-US', options);\n\n\nreturn formattedDate;\n} catch (error) {\n  console.error(error);\n  return \"Invalid time zone name\";\n}\n}\n\n\n\n\nconst iconUrlFromCode = (code) =>\n  `http://openweathermap.org/img/wn/${code}@2x.png`;\n\nexport default getFormattedWeatherData;\n\nexport { formatToLocalTime, iconUrlFromCode };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}